/*
 * LibrePOS Design System Variables
 * ================================
 * CSS custom properties following Material Design 3 color system.
 * Uses MaterializeCSS 2.2.2 built-in tokens with custom semantic palettes.
 *
 * Usage:
 *   - Theme toggle: <html data-theme="dark"> or <html data-theme="light">
 *   - Auto-detect: Remove data-theme attribute to follow system preference
 *
 * References:
 *   - Full design system: docs/uiux.md
 *   - MaterializeCSS: https://materializeweb.com
 */

/* =============================================================================
   BASE VARIABLES (Theme-Independent)
   ============================================================================= */
:root {
    /* ── Typography ── */
    --pos-font-family: system-ui, -apple-system, BlinkMacSystemFont,
                       'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
    --pos-font-mono: ui-monospace, 'SF Mono', Monaco, 'Cascadia Code', monospace;

    /* Font Sizes - Touch-optimized minimums */
    --pos-text-xs: 0.75rem;    /* 12px - minimum for labels */
    --pos-text-sm: 0.875rem;   /* 14px */
    --pos-text-base: 1rem;     /* 16px - body text minimum */
    --pos-text-lg: 1.125rem;   /* 18px */
    --pos-text-xl: 1.25rem;    /* 20px */
    --pos-text-2xl: 1.5rem;    /* 24px */
    --pos-text-3xl: 1.875rem;  /* 30px */
    --pos-text-4xl: 2.25rem;   /* 36px - large displays */

    /* ── Spacing Scale ── */
    --pos-space-1: 0.25rem;   /* 4px */
    --pos-space-2: 0.5rem;    /* 8px */
    --pos-space-3: 0.75rem;   /* 12px */
    --pos-space-4: 1rem;      /* 16px */
    --pos-space-5: 1.25rem;   /* 20px */
    --pos-space-6: 1.5rem;    /* 24px */
    --pos-space-8: 2rem;      /* 32px */
    --pos-space-10: 2.5rem;   /* 40px */
    --pos-space-12: 3rem;     /* 48px */

    /* ── Layout ── */
    --navbar-height: 64px;
    --navbar-height-mobile: 56px;

    /* ══════════════════════════════════════════════════════════════════════════
       CUSTOM TONAL PALETTES (Success, Warning, Info)
       Following Material Design 3 tonal scale pattern (0-100)
       ══════════════════════════════════════════════════════════════════════════ */

    /* ── Success (Green) - Source: #1B7D3E ── */
    --md-ref-palette-success0: #000000;
    --md-ref-palette-success10: #002109;
    --md-ref-palette-success20: #003915;
    --md-ref-palette-success30: #005322;
    --md-ref-palette-success40: #1b7d3e;
    --md-ref-palette-success50: #3d9857;
    --md-ref-palette-success60: #58b370;
    --md-ref-palette-success70: #73cf8a;
    --md-ref-palette-success80: #8feca4;
    --md-ref-palette-success90: #abffc0;
    --md-ref-palette-success95: #c8ffe0;
    --md-ref-palette-success99: #f5fff5;
    --md-ref-palette-success100: #ffffff;

    /* ── Warning (Amber) - Source: #8B5000 ── */
    --md-ref-palette-warning0: #000000;
    --md-ref-palette-warning10: #2c1600;
    --md-ref-palette-warning20: #4a2800;
    --md-ref-palette-warning30: #6a3b00;
    --md-ref-palette-warning40: #8b5000;
    --md-ref-palette-warning50: #a96600;
    --md-ref-palette-warning60: #c87f1a;
    --md-ref-palette-warning70: #e79a38;
    --md-ref-palette-warning80: #ffb95c;
    --md-ref-palette-warning90: #ffddb5;
    --md-ref-palette-warning95: #ffeedc;
    --md-ref-palette-warning99: #fffbff;
    --md-ref-palette-warning100: #ffffff;

    /* ── Info (Cyan) - Source: #006879 ── */
    --md-ref-palette-info0: #000000;
    --md-ref-palette-info10: #001f26;
    --md-ref-palette-info20: #003640;
    --md-ref-palette-info30: #004e5c;
    --md-ref-palette-info40: #006879;
    --md-ref-palette-info50: #008396;
    --md-ref-palette-info60: #269eb4;
    --md-ref-palette-info70: #4bb9d0;
    --md-ref-palette-info80: #6ad5ed;
    --md-ref-palette-info90: #a0efff;
    --md-ref-palette-info95: #d4f7ff;
    --md-ref-palette-info99: #f6feff;
    --md-ref-palette-info100: #ffffff;
}


/* =============================================================================
   LIGHT THEME (Default)
   ============================================================================= */
:root,
:root:not([data-theme]),
[data-theme="light"] {
    color-scheme: light;

    /* ══════════════════════════════════════════════════════════════════════════
       Material Design System Colors - Light
       Override Materialize defaults to ensure consistent theming
       ══════════════════════════════════════════════════════════════════════════ */
    --md-sys-color-primary: var(--md-sys-color-primary-light);
    --md-sys-color-on-primary: var(--md-sys-color-on-primary-light);
    --md-sys-color-primary-container: var(--md-sys-color-primary-container-light);
    --md-sys-color-on-primary-container: var(--md-sys-color-on-primary-container-light);

    --md-sys-color-secondary: var(--md-sys-color-secondary-light);
    --md-sys-color-on-secondary: var(--md-sys-color-on-secondary-light);
    --md-sys-color-secondary-container: var(--md-sys-color-secondary-container-light);
    --md-sys-color-on-secondary-container: var(--md-sys-color-on-secondary-container-light);

    --md-sys-color-tertiary: var(--md-sys-color-tertiary-light);
    --md-sys-color-on-tertiary: var(--md-sys-color-on-tertiary-light);
    --md-sys-color-tertiary-container: var(--md-sys-color-tertiary-container-light);
    --md-sys-color-on-tertiary-container: var(--md-sys-color-on-tertiary-container-light);

    --md-sys-color-error: var(--md-sys-color-error-light);
    --md-sys-color-on-error: var(--md-sys-color-on-error-light);
    --md-sys-color-error-container: var(--md-sys-color-error-container-light);
    --md-sys-color-on-error-container: var(--md-sys-color-on-error-container-light);

    --md-sys-color-background: var(--md-sys-color-background-light);
    --md-sys-color-on-background: var(--md-sys-color-on-background-light);
    --md-sys-color-surface: var(--md-sys-color-surface-light);
    --md-sys-color-on-surface: var(--md-sys-color-on-surface-light);

    --md-sys-color-surface-variant: var(--md-sys-color-surface-variant-light);
    --md-sys-color-on-surface-variant: var(--md-sys-color-on-surface-variant-light);

    --md-sys-color-outline: var(--md-sys-color-outline-light);
    --md-sys-color-outline-variant: var(--md-sys-color-outline-variant-light);

    --md-sys-color-inverse-surface: var(--md-sys-color-inverse-surface-light);
    --md-sys-color-inverse-on-surface: var(--md-sys-color-inverse-on-surface-light);
    --md-sys-color-inverse-primary: var(--md-sys-color-inverse-primary-light);

    --md-sys-color-shadow: var(--md-sys-color-shadow-light);
    --md-sys-color-scrim: var(--md-sys-color-scrim-light);
    --md-sys-color-surface-tint: var(--md-sys-color-surface-tint-light);

    /* ══════════════════════════════════════════════════════════════════════════
       Custom Semantic Colors - Light
       WCAG 2.1 AA compliant (4.5:1 minimum contrast)
       ══════════════════════════════════════════════════════════════════════════ */

    /* ── Success ── */
    --sys-color-success: var(--md-ref-palette-success40);
    --sys-color-on-success: #ffffff;
    --sys-color-success-container: var(--md-ref-palette-success90);
    --sys-color-on-success-container: var(--md-ref-palette-success10);

    /* ── Warning ── */
    --sys-color-warning: var(--md-ref-palette-warning40);
    --sys-color-on-warning: #ffffff;
    --sys-color-warning-container: var(--md-ref-palette-warning90);
    --sys-color-on-warning-container: var(--md-ref-palette-warning10);

    /* ── Info ── */
    --sys-color-info: var(--md-ref-palette-info40);
    --sys-color-on-info: #ffffff;
    --sys-color-info-container: var(--md-ref-palette-info90);
    --sys-color-on-info-container: var(--md-ref-palette-info10);

    /* ── Error (alias for consistency) ── */
    --sys-color-error: var(--md-sys-color-error);
    --sys-color-on-error: var(--md-sys-color-on-error);
    --sys-color-error-container: var(--md-sys-color-error-container);
    --sys-color-on-error-container: var(--md-sys-color-on-error-container);
}


/* =============================================================================
   DARK THEME
   ============================================================================= */
[data-theme="dark"] {
    color-scheme: dark;

    /* ══════════════════════════════════════════════════════════════════════════
       Material Design System Colors - Dark
       ══════════════════════════════════════════════════════════════════════════ */
    --md-sys-color-primary: var(--md-sys-color-primary-dark);
    --md-sys-color-on-primary: var(--md-sys-color-on-primary-dark);
    --md-sys-color-primary-container: var(--md-sys-color-primary-container-dark);
    --md-sys-color-on-primary-container: var(--md-sys-color-on-primary-container-dark);

    --md-sys-color-secondary: var(--md-sys-color-secondary-dark);
    --md-sys-color-on-secondary: var(--md-sys-color-on-secondary-dark);
    --md-sys-color-secondary-container: var(--md-sys-color-secondary-container-dark);
    --md-sys-color-on-secondary-container: var(--md-sys-color-on-secondary-container-dark);

    --md-sys-color-tertiary: var(--md-sys-color-tertiary-dark);
    --md-sys-color-on-tertiary: var(--md-sys-color-on-tertiary-dark);
    --md-sys-color-tertiary-container: var(--md-sys-color-tertiary-container-dark);
    --md-sys-color-on-tertiary-container: var(--md-sys-color-on-tertiary-container-dark);

    --md-sys-color-error: var(--md-sys-color-error-dark);
    --md-sys-color-on-error: var(--md-sys-color-on-error-dark);
    --md-sys-color-error-container: var(--md-sys-color-error-container-dark);
    --md-sys-color-on-error-container: var(--md-sys-color-on-error-container-dark);

    --md-sys-color-background: var(--md-sys-color-background-dark);
    --md-sys-color-on-background: var(--md-sys-color-on-background-dark);
    --md-sys-color-surface: var(--md-sys-color-surface-dark);
    --md-sys-color-on-surface: var(--md-sys-color-on-surface-dark);

    --md-sys-color-surface-variant: var(--md-sys-color-surface-variant-dark);
    --md-sys-color-on-surface-variant: var(--md-sys-color-on-surface-variant-dark);

    --md-sys-color-outline: var(--md-sys-color-outline-dark);
    --md-sys-color-outline-variant: var(--md-sys-color-outline-variant-dark);

    --md-sys-color-inverse-surface: var(--md-sys-color-inverse-surface-dark);
    --md-sys-color-inverse-on-surface: var(--md-sys-color-inverse-on-surface-dark);
    --md-sys-color-inverse-primary: var(--md-sys-color-inverse-primary-dark);

    --md-sys-color-shadow: var(--md-sys-color-shadow-dark);
    --md-sys-color-scrim: var(--md-sys-color-scrim-dark);
    --md-sys-color-surface-tint: var(--md-sys-color-surface-tint-dark);

    /* ══════════════════════════════════════════════════════════════════════════
       Custom Semantic Colors - Dark
       WCAG 2.1 AA compliant (4.5:1 minimum contrast)
       ══════════════════════════════════════════════════════════════════════════ */

    /* ── Success ── */
    --sys-color-success: var(--md-ref-palette-success80);
    --sys-color-on-success: var(--md-ref-palette-success20);
    --sys-color-success-container: var(--md-ref-palette-success30);
    --sys-color-on-success-container: var(--md-ref-palette-success90);

    /* ── Warning ── */
    --sys-color-warning: var(--md-ref-palette-warning80);
    --sys-color-on-warning: var(--md-ref-palette-warning20);
    --sys-color-warning-container: var(--md-ref-palette-warning30);
    --sys-color-on-warning-container: var(--md-ref-palette-warning90);

    /* ── Info ── */
    --sys-color-info: var(--md-ref-palette-info80);
    --sys-color-on-info: var(--md-ref-palette-info20);
    --sys-color-info-container: var(--md-ref-palette-info30);
    --sys-color-on-info-container: var(--md-ref-palette-info90);

    /* ── Error (alias for consistency) ── */
    --sys-color-error: var(--md-sys-color-error);
    --sys-color-on-error: var(--md-sys-color-on-error);
    --sys-color-error-container: var(--md-sys-color-error-container);
    --sys-color-on-error-container: var(--md-sys-color-on-error-container);
}


/* =============================================================================
   SYSTEM PREFERENCE FALLBACK
   Applies dark theme when no data-theme attribute and system prefers dark
   ============================================================================= */
@media (prefers-color-scheme: dark) {
    :root:not([data-theme]) {
        color-scheme: dark;

        /* Material Design System Colors - Dark */
        --md-sys-color-primary: var(--md-sys-color-primary-dark);
        --md-sys-color-on-primary: var(--md-sys-color-on-primary-dark);
        --md-sys-color-primary-container: var(--md-sys-color-primary-container-dark);
        --md-sys-color-on-primary-container: var(--md-sys-color-on-primary-container-dark);

        --md-sys-color-secondary: var(--md-sys-color-secondary-dark);
        --md-sys-color-on-secondary: var(--md-sys-color-on-secondary-dark);
        --md-sys-color-secondary-container: var(--md-sys-color-secondary-container-dark);
        --md-sys-color-on-secondary-container: var(--md-sys-color-on-secondary-container-dark);

        --md-sys-color-tertiary: var(--md-sys-color-tertiary-dark);
        --md-sys-color-on-tertiary: var(--md-sys-color-on-tertiary-dark);
        --md-sys-color-tertiary-container: var(--md-sys-color-tertiary-container-dark);
        --md-sys-color-on-tertiary-container: var(--md-sys-color-on-tertiary-container-dark);

        --md-sys-color-error: var(--md-sys-color-error-dark);
        --md-sys-color-on-error: var(--md-sys-color-on-error-dark);
        --md-sys-color-error-container: var(--md-sys-color-error-container-dark);
        --md-sys-color-on-error-container: var(--md-sys-color-on-error-container-dark);

        --md-sys-color-background: var(--md-sys-color-background-dark);
        --md-sys-color-on-background: var(--md-sys-color-on-background-dark);
        --md-sys-color-surface: var(--md-sys-color-surface-dark);
        --md-sys-color-on-surface: var(--md-sys-color-on-surface-dark);

        --md-sys-color-surface-variant: var(--md-sys-color-surface-variant-dark);
        --md-sys-color-on-surface-variant: var(--md-sys-color-on-surface-variant-dark);

        --md-sys-color-outline: var(--md-sys-color-outline-dark);
        --md-sys-color-outline-variant: var(--md-sys-color-outline-variant-dark);

        --md-sys-color-inverse-surface: var(--md-sys-color-inverse-surface-dark);
        --md-sys-color-inverse-on-surface: var(--md-sys-color-inverse-on-surface-dark);
        --md-sys-color-inverse-primary: var(--md-sys-color-inverse-primary-dark);

        --md-sys-color-shadow: var(--md-sys-color-shadow-dark);
        --md-sys-color-scrim: var(--md-sys-color-scrim-dark);
        --md-sys-color-surface-tint: var(--md-sys-color-surface-tint-dark);

        /* Custom Semantic Colors - Dark */
        --sys-color-success: var(--md-ref-palette-success80);
        --sys-color-on-success: var(--md-ref-palette-success20);
        --sys-color-success-container: var(--md-ref-palette-success30);
        --sys-color-on-success-container: var(--md-ref-palette-success90);

        --sys-color-warning: var(--md-ref-palette-warning80);
        --sys-color-on-warning: var(--md-ref-palette-warning20);
        --sys-color-warning-container: var(--md-ref-palette-warning30);
        --sys-color-on-warning-container: var(--md-ref-palette-warning90);

        --sys-color-info: var(--md-ref-palette-info80);
        --sys-color-on-info: var(--md-ref-palette-info20);
        --sys-color-info-container: var(--md-ref-palette-info30);
        --sys-color-on-info-container: var(--md-ref-palette-info90);

        --sys-color-error: var(--md-sys-color-error);
        --sys-color-on-error: var(--md-sys-color-on-error);
        --sys-color-error-container: var(--md-sys-color-error-container);
        --sys-color-on-error-container: var(--md-sys-color-on-error-container);
    }
}


/* =============================================================================
   HTMX Loading States
   ============================================================================= */
.htmx-indicator {
    display: none;
}

.htmx-request .htmx-indicator {
    display: block;
}

.htmx-request table,
.htmx-request .collection {
    opacity: 0.5;
    pointer-events: none;
    transition: opacity 0.2s ease;
}
