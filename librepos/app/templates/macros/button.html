{#
    Button Macros
    =============
    MaterializeCSS button components with support for links and action buttons.

    Import:
        {% import "macros/button.html" as Button %}

    Button Types:
        - filled:   Primary actions (default)
        - tonal:    Secondary actions
        - outlined: Bordered buttons
        - elevated: Raised/shadow buttons
        - text:     Text-only buttons

    Link Buttons (<a>):
        {{ Button.render("Click Me", url="/page") }}
        {{ Button.filled("Save", url="/save", icon="save") }}
        {{ Button.outlined("Cancel", url="/cancel") }}

    Action Buttons (<button>):
        {{ Button.button("Submit", button_type="submit") }}
        {{ Button.filled_btn("Save", icon="save") }}
        {{ Button.submit("Create Account", icon="person_add") }}

    With Icons:
        {{ Button.filled("Add Item", url="/add", icon="add", icon_position="left") }}
        {{ Button.outlined_btn("Delete", icon="delete", icon_position="right") }}

    Mobile Text Hiding:
        {{ Button.filled("Dashboard", url="/", icon="home", hide_text_mobile=True) }}
#}

{% import 'macros/icon.html' as Icon %}


{# ==========================================================================
   PRIVATE HELPER
   ========================================================================== #}

{# _render_content(text, icon, icon_position, hide_text_mobile)
   -------------------------------------------------------------
   Renders the inner content of a button (icon + text).
#}
{% macro _render_content(text, icon, icon_position, hide_text_mobile) -%}
    {% if icon and icon_position == 'left' %}
        {{ Icon.render(icon, class_='left') }}
    {% endif %}
    {% if hide_text_mobile %}
        <span class="hide-on-small-only">{{ text }}</span>
    {% else %}
        <span>{{ text }}</span>
    {% endif %}
    {% if icon and icon_position == 'right' %}
        {{ Icon.render(icon, class_='right') }}
    {% endif %}
{%- endmacro %}


{# ==========================================================================
   BASE MACROS
   ========================================================================== #}

{# render(text, url='#', type='filled', icon=None, icon_position='left', hide_text_mobile=False, class_='')
   ---------------------------------------------------------------------------------------------------------
   Renders a link button (<a> element) for navigation.

   Parameters:
       text             (str):  Required. Button label text.
       url              (str):  Optional. Destination URL. Defaults to '#'.
       type             (str):  Optional. Button style: filled, tonal, outlined, elevated, text.
       icon             (str):  Optional. Material Symbols icon name.
       icon_position    (str):  Optional. 'left' or 'right'. Defaults to 'left'.
       hide_text_mobile (bool): Optional. Hide text on small screens. Defaults to False.
       class_           (str):  Optional. Additional CSS classes.
#}
{% macro render(text, url='#', type='filled', icon=None, icon_position='left', hide_text_mobile=False, class_='') -%}
    <a href="{{ url }}"
       class="btn {{ type }} waves-effect waves-light{% if class_ %} {{ class_ }}{% endif %}">
        {{- _render_content(text, icon, icon_position, hide_text_mobile) -}}
    </a>
{%- endmacro %}


{# button(text, type='filled', button_type='button', icon=None, icon_position='left', hide_text_mobile=False, disabled=False, class_='')
   --------------------------------------------------------------------------------------------------------------------------------------
   Renders an action button (<button> element) for forms and actions.

   Parameters:
       text             (str):  Required. Button label text.
       type             (str):  Optional. Button style: filled, tonal, outlined, elevated, text.
       button_type      (str):  Optional. HTML type: button, submit, reset. Defaults to 'button'.
       icon             (str):  Optional. Material Symbols icon name.
       icon_position    (str):  Optional. 'left' or 'right'. Defaults to 'left'.
       hide_text_mobile (bool): Optional. Hide text on small screens. Defaults to False.
       disabled         (bool): Optional. Disabled state. Defaults to False.
       class_           (str):  Optional. Additional CSS classes.
#}
{% macro button(text, type='filled', button_type='button', icon=None, icon_position='left', hide_text_mobile=False, disabled=False, class_='') -%}
    <button type="{{ button_type }}"
            class="btn {{ type }} waves-effect waves-light{% if class_ %} {{ class_ }}{% endif %}"
            {% if disabled %}disabled{% endif %}>
        {{- _render_content(text, icon, icon_position, hide_text_mobile) -}}
    </button>
{%- endmacro %}


{# ==========================================================================
   SEMANTIC LINK MACROS (<a>)
   ========================================================================== #}

{# filled(text, url='#', icon=None, icon_position='left', hide_text_mobile=False, class_='')
   -----------------------------------------------------------------------------------------
   Primary action link button with solid background.
#}
{% macro filled(text, url='#', icon=None, icon_position='left', hide_text_mobile=False, class_='') -%}
    {{ render(text, url=url, type='filled', icon=icon, icon_position=icon_position, hide_text_mobile=hide_text_mobile, class_=class_) }}
{%- endmacro %}

{# tonal(text, url='#', icon=None, icon_position='left', hide_text_mobile=False, class_='')
   ----------------------------------------------------------------------------------------
   Secondary action link button with tonal background.
#}
{% macro tonal(text, url='#', icon=None, icon_position='left', hide_text_mobile=False, class_='') -%}
    {{ render(text, url=url, type='tonal', icon=icon, icon_position=icon_position, hide_text_mobile=hide_text_mobile, class_=class_) }}
{%- endmacro %}

{# outlined(text, url='#', icon=None, icon_position='left', hide_text_mobile=False, class_='')
   -------------------------------------------------------------------------------------------
   Link button with border and transparent background.
#}
{% macro outlined(text, url='#', icon=None, icon_position='left', hide_text_mobile=False, class_='') -%}
    {{ render(text, url=url, type='outlined', icon=icon, icon_position=icon_position, hide_text_mobile=hide_text_mobile, class_=class_) }}
{%- endmacro %}

{# elevated(text, url='#', icon=None, icon_position='left', hide_text_mobile=False, class_='')
   -------------------------------------------------------------------------------------------
   Raised link button with shadow.
#}
{% macro elevated(text, url='#', icon=None, icon_position='left', hide_text_mobile=False, class_='') -%}
    {{ render(text, url=url, type='elevated', icon=icon, icon_position=icon_position, hide_text_mobile=hide_text_mobile, class_=class_) }}
{%- endmacro %}

{# text_link(text, url='#', icon=None, icon_position='left', hide_text_mobile=False, class_='')
   --------------------------------------------------------------------------------------------
   Text-only link button without background.
#}
{% macro text_link(text, url='#', icon=None, icon_position='left', hide_text_mobile=False, class_='') -%}
    {{ render(text, url=url, type='text', icon=icon, icon_position=icon_position, hide_text_mobile=hide_text_mobile, class_=class_) }}
{%- endmacro %}


{# ==========================================================================
   SEMANTIC BUTTON MACROS (<button>)
   ========================================================================== #}

{# filled_btn(text, icon=None, icon_position='left', hide_text_mobile=False, disabled=False, class_='')
   -----------------------------------------------------------------------------------------------------
   Primary action button with solid background.
#}
{% macro filled_btn(text, icon=None, icon_position='left', hide_text_mobile=False, disabled=False, class_='') -%}
    {{ button(text, type='filled', icon=icon, icon_position=icon_position, hide_text_mobile=hide_text_mobile, disabled=disabled, class_=class_) }}
{%- endmacro %}

{# tonal_btn(text, icon=None, icon_position='left', hide_text_mobile=False, disabled=False, class_='')
   ----------------------------------------------------------------------------------------------------
   Secondary action button with tonal background.
#}
{% macro tonal_btn(text, icon=None, icon_position='left', hide_text_mobile=False, disabled=False, class_='') -%}
    {{ button(text, type='tonal', icon=icon, icon_position=icon_position, hide_text_mobile=hide_text_mobile, disabled=disabled, class_=class_) }}
{%- endmacro %}

{# outlined_btn(text, icon=None, icon_position='left', hide_text_mobile=False, disabled=False, class_='')
   -------------------------------------------------------------------------------------------------------
   Button with border and transparent background.
#}
{% macro outlined_btn(text, icon=None, icon_position='left', hide_text_mobile=False, disabled=False, class_='') -%}
    {{ button(text, type='outlined', icon=icon, icon_position=icon_position, hide_text_mobile=hide_text_mobile, disabled=disabled, class_=class_) }}
{%- endmacro %}

{# elevated_btn(text, icon=None, icon_position='left', hide_text_mobile=False, disabled=False, class_='')
   -------------------------------------------------------------------------------------------------------
   Raised button with shadow.
#}
{% macro elevated_btn(text, icon=None, icon_position='left', hide_text_mobile=False, disabled=False, class_='') -%}
    {{ button(text, type='elevated', icon=icon, icon_position=icon_position, hide_text_mobile=hide_text_mobile, disabled=disabled, class_=class_) }}
{%- endmacro %}

{# text_btn(text, icon=None, icon_position='left', hide_text_mobile=False, disabled=False, class_='')
   ---------------------------------------------------------------------------------------------------
   Text-only button without background.
#}
{% macro text_btn(text, icon=None, icon_position='left', hide_text_mobile=False, disabled=False, class_='') -%}
    {{ button(text, type='text', icon=icon, icon_position=icon_position, hide_text_mobile=hide_text_mobile, disabled=disabled, class_=class_) }}
{%- endmacro %}

{# submit(text, icon=None, icon_position='left', hide_text_mobile=False, disabled=False, class_='')
   -------------------------------------------------------------------------------------------------
   Form submit button with filled style.
#}
{% macro submit(text, icon=None, icon_position='left', hide_text_mobile=False, disabled=False, class_='') -%}
    {{ button(text, type='filled', button_type='submit', icon=icon, icon_position=icon_position, hide_text_mobile=hide_text_mobile, disabled=disabled, class_=class_) }}
{%- endmacro %}
